- hosts: all
  vars:
    server_name: "{{ ansible_default_ipv4.address }}"
    document_root: /var/www/app
  tasks:
    - name: Synchronize static library files
      synchronize:
        src: lib/
        dest: /var/www/app/lib
    - name: Synchronize build files
      synchronize:
        src: build/
        dest: /var/www/app/build
    - name: Synchronize root files
      synchronize:
        src: approot/
        dest: /var/www/app
    - name: Synchronize executable files
      synchronize:
        src: rustserver/target/release/pybook-rustserver
        dest: /app/pybook-rustserver
    - name: Synchronize demo notebooks
      synchronize:
        src: notebooks/
        dest: /app/notebooks
    - name: Restart rust server
      service:
        name: pybook-rustserver
        state: restarted
